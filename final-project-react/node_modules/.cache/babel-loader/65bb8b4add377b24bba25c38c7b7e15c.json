{"ast":null,"code":"var _jsxFileName = \"D:\\\\Insight_workshop\\\\Django_React_project\\\\final project(React)\\\\final-project-react\\\\src\\\\Authentication\\\\Userdata.js\";\nimport React, { Component } from 'react';\nimport ShowClassItem from './ShowClassItem';\nimport './CreateClassForm.css';\nimport UserProfile from './UserProfile';\nexport default class Userdata extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      emailStored: false,\n      obj: [],\n      usertoken: [],\n      createClass: false,\n      userobj: [],\n      createbtn: 'Create Class',\n      newclassname: '',\n      inClassroom: false,\n      classid: '',\n      displaymenu: false,\n      showmessage: false,\n      invitationlink: '',\n      classemail: '',\n      userprofileobj: [],\n      showProfile: false,\n      userName: '',\n      fullname: ''\n    };\n\n    this.onHandleSubmit = () => {\n      //creating a new classroom\n      const newclass = new FormData();\n      newclass.append('classname', this.state.newclassname);\n      newclass.append('email', localStorage.getItem('email'));\n      fetch('http://127.0.0.1:8000/data/studymaterial_class_create/', {\n        method: 'POST',\n        body: newclass\n      }).then(response => response.json()).then(result => {\n        const linkclassdata = new FormData();\n        linkclassdata.append('classroom_id', result.id);\n        linkclassdata.append('user_id', this.state.usertoken[0].user_id);\n        fetch('http://127.0.0.1:8000/data/myclasses_create/', {\n          method: 'POST',\n          body: linkclassdata\n        }).then(respone => respone.json()).then(result => {\n          console.log(\"setup is success\");\n        });\n      }).catch(error => {\n        console.log('error: ', error);\n      });\n    };\n\n    this.onDeleteClass = event => {\n      fetch('http://127.0.0.1:8000/data/studymaterial_class_delete/' + this.state.classid, {\n        method: 'DELETE'\n      }).then(response => response.json()).then(result => {\n        console.log('result class delete:', result);\n      }).then(error => {\n        console.log('error class delete:', error);\n      });\n      event.preventDefault();\n      window.location.reload();\n    };\n\n    this.onLogout = () => {\n      localStorage.removeItem('token'); // localStorage.removeItem('email')\n\n      window.location.reload();\n    };\n\n    this.onCreateClass = () => {\n      if (this.state.createClass === false) {\n        this.setState({\n          createClass: true,\n          createbtn: 'Submit'\n        });\n      } else if (this.state.createClass === true && this.state.newclassname === '') {\n        this.setState({\n          createClass: false,\n          createbtn: 'Create Class'\n        });\n      } else {\n        this.setState({\n          createClass: false,\n          createbtn: 'Create Class'\n        });\n        this.onHandleSubmit();\n        window.location.reload();\n      }\n    };\n\n    this.onChangeInput = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.onEnterRoom = (id, email) => {\n      this.setState({\n        inClassroom: true,\n        classid: id,\n        classemail: email,\n        invitationlink: 'http://localhost:3000/join/class/' + id // use the valid url before /join while hosting\n\n      });\n    };\n\n    this.onGoBack = () => {\n      window.location.reload();\n    };\n\n    this.onshowmenu = () => {\n      if (this.state.displaymenu === false) {\n        this.setState({\n          displaymenu: true\n        });\n      } else {\n        this.setState({\n          displaymenu: false\n        });\n      }\n    };\n\n    this.onshowmessage = () => {\n      if (this.state.showmessage === false) {\n        navigator.clipboard.writeText(this.state.invitationlink);\n        this.setState({\n          showmessage: true\n        });\n      } else {\n        this.setState({\n          showmessage: false\n        });\n      }\n    };\n\n    this.onHideCopiedmessage = () => {\n      this.setState({\n        showmessage: false\n      });\n    };\n\n    this.showProfileCart = () => {\n      if (this.state.showProfile === false) {\n        this.setState({\n          showProfile: true\n        });\n      } else {\n        this.setState({\n          showProfile: false\n        });\n      }\n    };\n  }\n\n  async componentDidMount() {\n    // check whether the link is referal or not\n    const urllink = window.location.href.split('/');\n    const urllistlength = urllink.length; //fetching token to get user_id\n\n    await fetch('http://127.0.0.1:8000/user/token/', {\n      method: 'GET'\n    }).then(response => response.json()).then(result => {\n      console.log('this is result : ', result);\n      this.setState({\n        usertoken: result.filter(function (item) {\n          return item.key === localStorage.getItem('token');\n        })\n      });\n    }); //fetching users to get email\n    // if (this.state.emailStored === false) {\n\n    await fetch('http://127.0.0.1:8000/user/list/', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Token ' + localStorage.getItem('token')\n      }\n    }).then(respone => respone.json()).then(result => {\n      const {\n        usertoken\n      } = this.state;\n      console.log('this is result: before', usertoken[0].user_id);\n      localStorage.setItem('UserId', usertoken[0].user_id);\n\n      if (usertoken[0] === undefined) {\n        window.location.reload();\n      }\n\n      this.setState({\n        userobj: result.filter(function (item) {\n          return item.id === usertoken[0]['user_id'];\n        })\n      });\n      console.log('this is user name ho', this.state.userobj[0].username);\n      this.setState({\n        userName: this.state.userobj[0].username,\n        fullname: this.state.userobj[0].first_name + ' ' + this.state.userobj[0].last_name\n      }); /// storing the email to the local storage\n\n      localStorage.setItem('email', this.state.userobj[0].email);\n    });\n    console.log('this is emailstored: ', this.state.emailStored); // }\n    //fetching list of class that is link with logged in user\n\n    const studentuser = await fetch('http://127.0.0.1:8000/data/myclasses_list/' + this.state.usertoken[0].user_id);\n    const userjson = await studentuser.json();\n    console.log('classes related to user id 1', userjson);\n    this.setState({\n      obj: userjson\n    });\n    console.log('Token ', localStorage.getItem('token')); // console.log('this is email haha', localStorage.getItem('email'))\n    // join as a student using referal link\n\n    if (urllink[urllistlength - 1] !== undefined && urllink[urllistlength - 2] === 'class' && urllink[urllistlength - 3] === 'join') {\n      console.log('you are joined to class using referal link');\n      console.log(parseInt(urllink[urllistlength - 1]));\n      const linkclassdata = new FormData();\n      linkclassdata.append('classroom_id', parseInt(urllink[urllistlength - 1]));\n      linkclassdata.append('user_id', this.state.usertoken[0].user_id);\n      fetch('http://127.0.0.1:8000/data/myclasses_create/', {\n        method: 'POST',\n        body: linkclassdata\n      }).then(respone => respone.json()).then(result => {\n        console.log(\"setup is success\");\n      });\n    } //fetching profile of user from api\n\n\n    const porfile = await fetch('http://127.0.0.1:8000/data/userinfo_list/' + this.state.usertoken[0].user_id);\n    const userprofile = await porfile.json();\n    this.setState({\n      userprofileobj: userprofile[0]\n    });\n    console.log('this is userprofile', this.state.userprofileobj); // creating user profile for logged in user\n\n    const newdata = new FormData();\n    newdata.append('userid', this.state.usertoken[0].user_id);\n    fetch('http://127.0.0.1:8000/data/userinfo_create/', {\n      method: 'POST',\n      body: newdata\n    }).then(response => response.json()).then(result => {\n      console.log('this is created result', result);\n    });\n  }\n\n  render() {\n    const abc = this.onEnterRoom;\n    const {\n      newclassname\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"side-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"top-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-info\",\n      onClick: this.onshowmenu,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 21\n      }\n    }, this.state.userprofileobj === undefined || this.state.userprofileobj.profileImg === null ? /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://img.icons8.com/material/40/000000/user-male-circle--v1.png\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 29\n      }\n    }) : /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.userprofileobj.profileImg,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 30\n      }\n    })), this.state.inClassroom === true ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back-arrow\",\n      title: \"goto back\",\n      onClick: this.onGoBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://img.icons8.com/fluent//000000/left.png\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 25\n      }\n    })) : /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"class-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 22\n      }\n    }, \"My Class Room\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logout-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this.onCreateClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 21\n      }\n    }, this.state.createbtn), this.state.inClassroom === true && this.state.classemail === localStorage.getItem('email') ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"invite-btn\",\n      onClick: this.onshowmessage,\n      onMouseOutCapture: this.onHideCopiedmessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 25\n      }\n    }, \"Invite\") : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 26\n      }\n    })), this.state.createClass === true ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-class-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"newclassname\",\n      value: newclassname,\n      placeholder: \"Enter name of new Class\",\n      required: true,\n      onChange: this.onChangeInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 29\n      }\n    })) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 27\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"classes-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }\n    }, this.state.inClassroom === false ? this.state.obj.map(function (item) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"single-class\",\n        key: item.id,\n        onClick: abc.bind(this, item.id, item.email),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 26\n        }\n      }, item.classname), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 25\n        }\n      }, item.email));\n    }) : /*#__PURE__*/React.createElement(ShowClassItem, {\n      classid: this.state.classid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 23\n      }\n    })), this.state.showmessage === true ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invite-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 25\n      }\n    }, \"Invitation code is copied !!!\")) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 22\n      }\n    }), this.state.displaymenu === true ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"vertical-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      onClick: this.showProfileCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 25\n      }\n    }, \"Profile\"), /*#__PURE__*/React.createElement(\"a\", {\n      onClick: this.onLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 25\n      }\n    }, \"Logout\"), this.state.inClassroom === true && this.state.classemail === localStorage.getItem('email') ? /*#__PURE__*/React.createElement(\"a\", {\n      onClick: this.onDeleteClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 29\n      }\n    }, \"Delete Class\") : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 30\n      }\n    })) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 22\n      }\n    }), this.state.showProfile === true ? /*#__PURE__*/React.createElement(UserProfile, {\n      showProfile: this.showProfileCart,\n      userName: this.state.userName,\n      fullname: this.state.fullname,\n      userprofile: this.state.userprofileobj,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 21\n      }\n    }) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 22\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["D:/Insight_workshop/Django_React_project/final project(React)/final-project-react/src/Authentication/Userdata.js"],"names":["React","Component","ShowClassItem","UserProfile","Userdata","state","emailStored","obj","usertoken","createClass","userobj","createbtn","newclassname","inClassroom","classid","displaymenu","showmessage","invitationlink","classemail","userprofileobj","showProfile","userName","fullname","onHandleSubmit","newclass","FormData","append","localStorage","getItem","fetch","method","body","then","response","json","result","linkclassdata","id","user_id","respone","console","log","catch","error","onDeleteClass","event","preventDefault","window","location","reload","onLogout","removeItem","onCreateClass","setState","onChangeInput","target","name","value","onEnterRoom","email","onGoBack","onshowmenu","onshowmessage","navigator","clipboard","writeText","onHideCopiedmessage","showProfileCart","componentDidMount","urllink","href","split","urllistlength","length","filter","item","key","headers","setItem","undefined","username","first_name","last_name","studentuser","userjson","parseInt","porfile","userprofile","newdata","render","abc","profileImg","map","bind","classname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport ShowClassItem from './ShowClassItem'\r\nimport './CreateClassForm.css'\r\nimport UserProfile from './UserProfile'\r\n\r\nexport default class Userdata extends Component {\r\n    state = {\r\n        emailStored: false,\r\n        obj:[],\r\n        usertoken:[],\r\n        createClass:false,\r\n        userobj: [],\r\n        createbtn: 'Create Class',\r\n        newclassname:'',\r\n        inClassroom: false,\r\n        classid:'',\r\n        displaymenu: false,\r\n        showmessage: false,\r\n        invitationlink: '',\r\n        classemail: '',\r\n        userprofileobj: [],\r\n        showProfile: false,\r\n        userName: '',\r\n        fullname: '',\r\n    }\r\n    async componentDidMount() {\r\n        // check whether the link is referal or not\r\n        const urllink = window.location.href.split('/')\r\n        const urllistlength = urllink.length\r\n\r\n        //fetching token to get user_id\r\n        await fetch('http://127.0.0.1:8000/user/token/',{\r\n            method: 'GET'\r\n        }).then(response => response.json())\r\n        .then(result => {\r\n            console.log('this is result : ', result)\r\n            this.setState({\r\n                usertoken: result.filter(function(item){return item.key === localStorage.getItem('token')}),\r\n            })\r\n        })\r\n\r\n        //fetching users to get email\r\n        // if (this.state.emailStored === false) {\r\n            await fetch('http://127.0.0.1:8000/user/list/',{\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Token '+localStorage.getItem('token')\r\n            },\r\n        }).then((respone)=>respone.json())\r\n        .then(result =>{\r\n            const {usertoken} = this.state\r\n            console.log('this is result: before',usertoken[0].user_id)\r\n            localStorage.setItem('UserId', usertoken[0].user_id)\r\n            if (usertoken[0] === undefined){\r\n                window.location.reload()\r\n            }\r\n            this.setState({\r\n                userobj: result.filter(function(item){return item.id === usertoken[0]['user_id']})\r\n            })\r\n            console.log('this is user name ho', this.state.userobj[0].username)\r\n            this.setState({\r\n                userName: this.state.userobj[0].username,\r\n                fullname: this.state.userobj[0].first_name + ' '+ this.state.userobj[0].last_name\r\n            })\r\n            /// storing the email to the local storage\r\n            localStorage.setItem('email',this.state.userobj[0].email)\r\n        })\r\n\r\n        console.log('this is emailstored: ',this.state.emailStored)\r\n        // }\r\n        //fetching list of class that is link with logged in user\r\n        const studentuser = await fetch('http://127.0.0.1:8000/data/myclasses_list/'+this.state.usertoken[0].user_id)\r\n        const userjson = await studentuser.json()\r\n        console.log('classes related to user id 1', userjson)\r\n        this.setState({\r\n            obj: userjson\r\n        })\r\n        console.log('Token ', localStorage.getItem('token'))\r\n        // console.log('this is email haha', localStorage.getItem('email'))\r\n        // join as a student using referal link\r\n        if((urllink[urllistlength-1] !== undefined) && (urllink[urllistlength-2] === 'class') && (urllink[urllistlength-3] === 'join')){\r\n            console.log('you are joined to class using referal link')\r\n            console.log(parseInt(urllink[urllistlength-1]))\r\n            const linkclassdata = new FormData()\r\n            linkclassdata.append('classroom_id', parseInt(urllink[urllistlength-1]))\r\n            linkclassdata.append('user_id', this.state.usertoken[0].user_id)\r\n            fetch('http://127.0.0.1:8000/data/myclasses_create/',{\r\n                method: 'POST',\r\n                body:linkclassdata\r\n            }).then(respone => respone.json())\r\n            .then(result =>{\r\n                console.log(\"setup is success\")\r\n            })\r\n        }\r\n        //fetching profile of user from api\r\n        const porfile = await fetch('http://127.0.0.1:8000/data/userinfo_list/'+this.state.usertoken[0].user_id)\r\n        const userprofile = await porfile.json()\r\n        this.setState({\r\n            userprofileobj: userprofile[0]\r\n        })\r\n        console.log('this is userprofile', this.state.userprofileobj)\r\n        // creating user profile for logged in user\r\n        const newdata = new FormData()\r\n        newdata.append('userid', this.state.usertoken[0].user_id)\r\n        fetch('http://127.0.0.1:8000/data/userinfo_create/',{\r\n            method: 'POST',\r\n            body: newdata\r\n        }).then(response => response.json())\r\n        .then(result => {\r\n            console.log('this is created result', result)\r\n        })\r\n    }\r\n    onHandleSubmit=()=>{\r\n        //creating a new classroom\r\n        const newclass = new FormData()\r\n        newclass.append('classname', this.state.newclassname)\r\n        newclass.append('email', localStorage.getItem('email'))\r\n        fetch('http://127.0.0.1:8000/data/studymaterial_class_create/',{\r\n            method: 'POST',\r\n            body:newclass\r\n        }).then(response => response.json())\r\n        .then(result =>{\r\n            const linkclassdata = new FormData()\r\n            linkclassdata.append('classroom_id',result.id)\r\n            linkclassdata.append('user_id', this.state.usertoken[0].user_id)\r\n            fetch('http://127.0.0.1:8000/data/myclasses_create/',{\r\n                method: 'POST',\r\n                body:linkclassdata\r\n            }).then(respone => respone.json())\r\n            .then(result =>{\r\n                console.log(\"setup is success\")\r\n            })\r\n        })\r\n        .catch(error=>{\r\n            console.log('error: ',error)\r\n        })\r\n    }\r\n    // delete class by user\r\n    onDeleteClass = (event) =>{\r\n        fetch('http://127.0.0.1:8000/data/studymaterial_class_delete/'+this.state.classid,{\r\n            method:'DELETE'\r\n        }).then(response=>response.json())\r\n        .then(result=>{\r\n            console.log('result class delete:', result)\r\n        }).then(error=>{\r\n            console.log('error class delete:',error)\r\n        })\r\n        event.preventDefault();\r\n        window.location.reload()\r\n    }\r\n    //logout user by removing the token saved in browser\r\n    onLogout =()=>{\r\n        localStorage.removeItem('token')\r\n        // localStorage.removeItem('email')\r\n        window.location.reload();\r\n    }\r\n    //create new class\r\n    onCreateClass =()=>{\r\n        if(this.state.createClass === false){\r\n            this.setState({\r\n                createClass: true,\r\n                createbtn: 'Submit'\r\n            })\r\n        }\r\n        else if (this.state.createClass === true && this.state.newclassname === ''){\r\n            this.setState({\r\n                createClass: false,\r\n                createbtn: 'Create Class'\r\n            })\r\n        }\r\n        else{\r\n            this.setState({\r\n                createClass: false,\r\n                createbtn: 'Create Class'\r\n            })\r\n            this.onHandleSubmit()\r\n            window.location.reload()\r\n        }\r\n    }\r\n    onChangeInput =(event)=>{\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        })\r\n    }\r\n    // enter into the clicked class\r\n    onEnterRoom =(id, email)=> {\r\n        this.setState({\r\n            inClassroom: true,\r\n            classid:id,\r\n            classemail: email,\r\n            invitationlink: 'http://localhost:3000/join/class/'+id  // use the valid url before /join while hosting\r\n\r\n        })\r\n       \r\n    }\r\n    //goto previous page\r\n    onGoBack =()=>{\r\n        window.location.reload()\r\n    }\r\n    //show profile and logout in menu\r\n    onshowmenu =()=>{\r\n        if (this.state.displaymenu === false){\r\n            this.setState({\r\n                displaymenu:true\r\n            })\r\n        }\r\n        else{\r\n            this.setState({\r\n                displaymenu:false\r\n            })\r\n        }\r\n    }\r\n    //show copied message on press of invite\r\n    onshowmessage = () =>{\r\n\r\n        if(this.state.showmessage === false){\r\n            navigator.clipboard.writeText(this.state.invitationlink)\r\n            this.setState({\r\n                showmessage: true,\r\n            })\r\n        }\r\n        else{\r\n            this.setState({\r\n                showmessage:false\r\n            })\r\n        }\r\n    }\r\n    onHideCopiedmessage = () =>{\r\n        this.setState({\r\n            showmessage:false\r\n        })\r\n    }\r\n    // show profile of user in cart\r\n    showProfileCart =()=>{\r\n        if(this.state.showProfile === false){\r\n            this.setState({\r\n                showProfile: true\r\n            })\r\n        }\r\n        else{\r\n            this.setState({\r\n                showProfile: false\r\n            })\r\n        }\r\n    }\r\n    render() {\r\n        const abc = this.onEnterRoom\r\n        const {newclassname} = this.state\r\n        \r\n        return (\r\n            <div>\r\n                 {/* side bar */}\r\n                <div className = \"side-bar\">\r\n                </div>\r\n                <div className = 'top-bar'>\r\n                    {/* profile picture of logged in user */}\r\n                    <div className = 'login-info' onClick = {this.onshowmenu}>\r\n                        {\r\n                            (this.state.userprofileobj === undefined || this.state.userprofileobj.profileImg === null)?\r\n                            <img src=\"https://img.icons8.com/material/40/000000/user-male-circle--v1.png\" alt = \"\"/>                    \r\n                            :<img src={this.state.userprofileobj.profileImg} alt = \"\"/>                    \r\n                        }\r\n                    </div>\r\n\r\n                {   \r\n                (this.state.inClassroom === true)?\r\n                    <div className = 'back-arrow' title = 'goto back' onClick = {this.onGoBack}>\r\n                        <img src=\"https://img.icons8.com/fluent//000000/left.png\" alt = ''/>               \r\n                    </div>\r\n                    :<h3 className = 'class-title'>My Class Room</h3>\r\n                \r\n                }\r\n                \r\n                <div className = 'logout-btn'>\r\n                    <button type = 'submit' onClick = {this.onCreateClass}>{this.state.createbtn}</button>\r\n                    {   \r\n                        (this.state.inClassroom === true && (this.state.classemail === localStorage.getItem('email')))?\r\n                        <button className = \"invite-btn\" onClick = {this.onshowmessage} onMouseOutCapture = {this.onHideCopiedmessage}>Invite</button>\r\n                        :<p></p>\r\n                    }\r\n                </div>\r\n\r\n                {\r\n                        (this.state.createClass === true)?\r\n                        <div className = 'create-class-form'>\r\n                            <input type = 'text' name = 'newclassname' value = {newclassname} placeholder = 'Enter name of new Class' required onChange = {this.onChangeInput}></input>\r\n                        </div>\r\n                        : <p></p>\r\n                    }\r\n                \r\n                </div>\r\n\r\n                <div className = \"classes-div\">\r\n                {  \r\n                (this.state.inClassroom === false)?\r\n                    this.state.obj.map(function(item){\r\n                        return (<div className = \"single-class\" key = {item.id} onClick = {abc.bind(this,  item.id, item.email)}>\r\n                         <h3>{item.classname}</h3>\r\n                        <h3>{item.email}</h3>\r\n                        </div>)\r\n                    })\r\n                    : <ShowClassItem classid = {this.state.classid}></ShowClassItem>\r\n                }\r\n                </div>\r\n\r\n                {   (this.state.showmessage === true)?\r\n                    <div className = \"invite-message\">\r\n                        <p>Invitation code is copied !!!</p>\r\n                    </div>\r\n                    :<p></p>\r\n                }\r\n                {   (this.state.displaymenu === true)?\r\n                    <div className=\"vertical-menu\">\r\n                        <div></div>\r\n                        <a onClick = {this.showProfileCart}>Profile</a>\r\n                        <a onClick = {this.onLogout}>Logout</a>\r\n                        {\r\n                            (this.state.inClassroom === true && (this.state.classemail === localStorage.getItem('email')))?\r\n                            <a onClick = {this.onDeleteClass}>Delete Class</a>\r\n                            :<p></p>\r\n                        }\r\n                    </div>\r\n                    :<p></p>\r\n                }\r\n\r\n                {\r\n                    (this.state.showProfile === true)?\r\n                    <UserProfile showProfile = {this.showProfileCart} userName = {this.state.userName} fullname = {this.state.fullname}  userprofile = {this.state.userprofileobj} ></UserProfile>\r\n                    :<p></p>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}