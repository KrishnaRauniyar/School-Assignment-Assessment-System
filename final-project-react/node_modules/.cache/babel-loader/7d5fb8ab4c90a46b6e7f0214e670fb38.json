{"ast":null,"code":"var _jsxFileName = \"D:\\\\Insight_workshop\\\\Django_React_project\\\\final project(React)\\\\final-project-react\\\\src\\\\Authentication\\\\UserLogin.js\";\nimport React, { Component } from 'react';\nimport './UserLogin.css';\nimport ResetPassword from './ResetPassword';\nexport default class UserLogin extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: '',\n      loginpage: true\n    };\n\n    this.jumpSignup = () => {\n      this.props.showsignup();\n    };\n\n    this.handleSubmit = event => {\n      const formdata = new FormData();\n      formdata.append('username', this.state.username);\n      formdata.append('password', this.state.password);\n      fetch('http://127.0.0.1:8000/user/login/', {\n        method: 'POST',\n        Header: 'context-Type: application/json',\n        body: formdata\n      }).then(response => response.json()).then(result => {\n        console.log('success', result);\n        console.log('this is status: ', result['non_field_errors']);\n        localStorage.setItem('token', result.token);\n\n        if (result.token.length >= 15 && result.token !== undefined) {\n          window.location.reload();\n        }\n      }).catch(error => {\n        console.error('Error:', error);\n      });\n      console.log('this is token from browser', localStorage.getItem('token'));\n      event.preventDefault();\n    };\n\n    this.onChangeinput = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.onResetPassword = () => {\n      if (this.state.loginpage === true) {\n        this.setState({\n          loginpage: false\n        });\n      } else {\n        this.setState({\n          loginpage: true\n        });\n      }\n    };\n\n    this.onShowLogin = () => {\n      this.setState({\n        loginpage: true\n      });\n    };\n  }\n\n  render() {\n    console.log('local token : ', localStorage.getItem('token'));\n    const {\n      username,\n      password\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, this.state.loginpage === true ? /*#__PURE__*/React.createElement(\"form\", {\n      className: \"signin-form\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }\n    }, \"User Login\"), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"username\",\n      value: username,\n      required: true,\n      onChange: this.onChangeinput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      value: password,\n      required: true,\n      onChange: this.onChangeinput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"forget-pass\",\n      onClick: this.onResetPassword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 25\n      }\n    }, \"Forgot password? reset password\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 25\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"create-acc\",\n      onClick: this.jumpSignup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }, \"Don't have account? Create one\")) : /*#__PURE__*/React.createElement(ResetPassword, {\n      onshowlogin: this.onShowLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 22\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["D:/Insight_workshop/Django_React_project/final project(React)/final-project-react/src/Authentication/UserLogin.js"],"names":["React","Component","ResetPassword","UserLogin","state","username","password","loginpage","jumpSignup","props","showsignup","handleSubmit","event","formdata","FormData","append","fetch","method","Header","body","then","response","json","result","console","log","localStorage","setItem","token","length","undefined","window","location","reload","catch","error","getItem","preventDefault","onChangeinput","setState","target","name","value","onResetPassword","onShowLogin","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport './UserLogin.css'\r\nimport ResetPassword from './ResetPassword'\r\n\r\nexport default class UserLogin extends Component {\r\n    state = {\r\n        username: '',\r\n        password: '',\r\n        loginpage: true,\r\n    }\r\n    jumpSignup = () =>{\r\n        this.props.showsignup()\r\n    }\r\n\r\n    handleSubmit = (event) =>{\r\n\r\n        const formdata = new FormData()\r\n        formdata.append('username', this.state.username)\r\n        formdata.append('password', this.state.password)\r\n        fetch('http://127.0.0.1:8000/user/login/', {\r\n        method: 'POST',\r\n        Header: 'context-Type: application/json',\r\n        body: formdata\r\n        }\r\n        ).then((response) =>response.json())\r\n        .then((result)=>{\r\n            console.log('success', result)\r\n            console.log('this is status: ', result['non_field_errors'])\r\n            localStorage.setItem('token',result.token)\r\n            if(result.token.length >=15 && result.token !== undefined){\r\n                window.location.reload()\r\n            }\r\n        })\r\n        .catch((error)=>{\r\n            console.error('Error:',error)\r\n        })\r\n        console.log('this is token from browser', localStorage.getItem('token'))\r\n        event.preventDefault();\r\n\r\n    }\r\n    onChangeinput =(event)=>{\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        })\r\n    }\r\n    onResetPassword = () =>{\r\n        if(this.state.loginpage === true){\r\n            this.setState({\r\n                loginpage: false\r\n            })\r\n        }\r\n        else{\r\n            this.setState({\r\n                loginpage: true\r\n            })\r\n        }\r\n    }\r\n    onShowLogin = () =>{\r\n        this.setState({\r\n            loginpage: true\r\n        })\r\n    }\r\n    render() {\r\n\r\n        console.log('local token : ',localStorage.getItem('token'))\r\n        const {username, password} = this.state\r\n        return (\r\n            <div>\r\n                {\r\n                    (this.state.loginpage === true)?\r\n                    <form className = \"signin-form\" onSubmit = {this.handleSubmit}>\r\n                        <h2>User Login</h2>\r\n                        <label>Username</label>\r\n                        <input type = \"text\" name = \"username\" value = {username} required onChange = {this.onChangeinput}></input>\r\n                        <label>Password</label>\r\n                        <input type = \"password\" name = \"password\" value = {password} required onChange = {this.onChangeinput}></input>\r\n                        <p className = \"forget-pass\" onClick = {this.onResetPassword}>Forgot password? reset password</p>\r\n                        <button type = \"submit\">Login</button>\r\n                        <p className = \"create-acc\" onClick = {this.jumpSignup}>Don't have account? Create one</p>\r\n                    </form>\r\n                    :<ResetPassword onshowlogin = {this.onShowLogin}></ResetPassword>\r\n\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}